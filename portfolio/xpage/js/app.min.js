const calendarButton=document.querySelector(".calendar__button");if(calendarButton){const e=new Date,t=document.querySelector("#calendar__date"),a=document.querySelector(".calendar__selected-day");function createCalendar(){const n=document.querySelector(".calendar__days"),l=document.querySelector(".calendar__month"),c=new Date(e.getFullYear(),e.getMonth()+1,0).getDate(),r=new Date(e.getFullYear(),e.getMonth(),0).getDate(),o=new Date(e.getFullYear(),e.getMonth(),1).getDay()-1,s=(new Date(e.getFullYear(),e.getMonth()+1,0).getDay(),["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"]);let d=[],i=0;if(-1===o)for(let e=6;e>0;e--)d.push(`<li class='calendar__day calendar__day_prev'>${r-e+1}</li>`),i++;else for(let e=o;e>0;e--)d.push(`<li class='calendar__day calendar__day_prev'>${r-e+1}</li>`),i++;for(let t=1;t<=c;t++)t===(new Date).getDate()&&e.getMonth()===(new Date).getMonth()&&e.getFullYear()===(new Date).getFullYear()?d.push(`<li class='calendar__day calendar__day_selected'>${t}</li>`):d.push(`<li class='calendar__day'>${t}</li>`);for(let e=c+i,t=1;t<=42-e;t++)d.push(`<li class='calendar__day calendar__day_next'>${t}</li>`);e.getFullYear()!==(new Date).getFullYear()?l.innerHTML=s[e.getMonth()]+", "+e.getFullYear():l.innerHTML=s[e.getMonth()],n.innerHTML=d.join(""),t.value=e.getFullYear()+"-"+e.getMonth()+"-"+e.getDate(),a.innerHTML=dateConverter(t.value)}createCalendar();const n=document.querySelector(".calendar__arrow_next"),l=document.querySelector(".calendar__arrow_prev");function nextMonth(){e.setMonth(e.getMonth()+1),createCalendar(),getDaysList()}function prevMonth(){e.setMonth(e.getMonth()-1),createCalendar(),getDaysList()}n.addEventListener("click",nextMonth),l.addEventListener("click",prevMonth);const c=document.getElementsByClassName("calendar__day"),r=document.querySelector(".calendar__body");function dateConverter(e){let t=e.split("-").reverse(),[a,n,l]=t,c=[];return a<10?c.push("0"+a):c.push(a),n<10?c.push("0"+(Number(n)+1)):c.push(n),c.push(l),c.join("/")}function selectDate(){t.value=e.getFullYear()+"-"+e.getMonth()+"-"+this.innerHTML;let n=document.querySelector(".calendar__day_selected");n&&n.classList.remove("calendar__day_selected"),this.classList.add("calendar__day_selected"),a.innerHTML=dateConverter(t.value),r.classList.remove("_active")}function getDaysList(){for(let e of c)e.classList.contains("calendar__day_prev")?e.addEventListener("click",prevMonth):e.classList.contains("calendar__day_next")?e.addEventListener("click",nextMonth):e.addEventListener("click",selectDate)}function externalCloseCalendar(e){const t=e.target;t.closest(".calendar__button")||t.closest(".calendar__body")||r.classList.remove("_active")}function openCalendar(e){e.preventDefault(),r.classList.add("_active"),document.addEventListener("click",externalCloseCalendar)}getDaysList(),calendarButton.addEventListener("click",openCalendar)}const categoryButton=document.querySelector(".category__button");if(categoryButton){const e=document.querySelector(".category__body"),t=document.querySelectorAll(".category__item"),a=document.querySelector("#category__select");function externalCloseCategory(t){const a=t.target;a.closest(".category__button")||a.closest(".category__body")||(e.classList.remove("_active"),categoryButton.classList.remove("_active"))}function toggleCategory(t){t.preventDefault(),e.classList.toggle("_active"),categoryButton.classList.toggle("_active"),document.addEventListener("click",externalCloseCategory)}function selectCategory(){for(let e of t)e.classList.contains("category__item_active")&&e.classList.remove("category__item_active");this.classList.add("category__item_active"),a.value=this.dataset.category,e.classList.toggle("_active"),categoryButton.classList.toggle("_active")}categoryButton.addEventListener("click",toggleCategory);for(let e of t)e.addEventListener("click",selectCategory)}const form=document.querySelector("#comment-form");if(form){const e=document.querySelectorAll("._placeholder");function placeholderRemove(){this.value===this.dataset.placeholder&&(this.value="")}function placeholderAppend(){""===this.value&&(this.value=this.dataset.placeholder)}for(let t of e)t.value=t.dataset.placeholder,t.addEventListener("focus",placeholderRemove),t.addEventListener("blur",placeholderAppend)}